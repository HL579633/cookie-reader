<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />hr
  <title>Cookie Clicker ã‚»ãƒ¼ãƒ–ã‚³ãƒ¼ãƒ‰ç·¨é›†ãƒ„ãƒ¼ãƒ«</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f0f0f0; }
    textarea, input { width: 100%; margin-top: 10px; }
    pre { background: #222; color: #0f0; padding: 10px; overflow-x: auto; }
  </style>
</head>
<body>
  <h2>ğŸª ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ç·¨é›†ãƒ„ãƒ¼ãƒ«</h2>

  <label>ã‚»ãƒ¼ãƒ–ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ï¼š</label>
  <textarea id="saveCode" rows="6"></textarea>
  <button onclick="decodeAndEdit()">ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦ç·¨é›†å¯èƒ½ã«</button>

  <div id="editSection" style="display:none;">
    <h3>ç·¨é›†ï¼š</h3>
    <label>ã‚¯ãƒƒã‚­ãƒ¼æ‰€æŒæ•°ï¼š</label>
    <input type="text" id="cookieCount" />
    <button onclick="reencode()">å†ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦æ–°ã—ã„ã‚»ãƒ¼ãƒ–ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ</button>
  </div>

  <h3>å‡ºåŠ›ï¼š</h3>
  <pre id="output"></pre>

  <script>
    let decodedData = "";

    function decodeAndEdit() {
      const input = document.getElementById("saveCode").value.trim();
      try {
        decodedData = atob(input);
        const match = decodedData.match(/Cookie Clicker Game[^;]*;([0-9\.]+)/);
        const cookies = match ? match[1] : "";
        document.getElementById("cookieCount").value = cookies;
        document.getElementById("editSection").style.display = "block";
        document.getElementById("output").textContent = "ç·¨é›†å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚";
      } catch (e) {
        document.getElementById("output").textContent = "ãƒ‡ã‚³ãƒ¼ãƒ‰å¤±æ•—ã€‚ã‚»ãƒ¼ãƒ–ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ã„ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚";
      }
    }

    function reencode() {
      const newCookies = document.getElementById("cookieCount").value;
      let newData = decodedData.replace(/(Cookie Clicker Game[^;]*;)([0-9\.]+)/, `$1${newCookies}`);
      const encoded = btoa(newData);
      document.getElementById("output").textContent = encoded;
    }
  </script>
</body>
</html>
